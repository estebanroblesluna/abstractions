INSERT INTO `application` (`application_id`, `name`, `team_id`) VALUES (5,'LIFIA new site',1);

-- INSERT INTO `flows` (`flow_id`, `name`, `json_representation`, `application_id`, `application_snapshot_id`) VALUES (35,'4a3b2c45-31f9-4e13-a869-94c59b8417ee','{\"id\":\"4a3b2c45-31f9-4e13-a869-94c59b8417ee\",\"version\":0,\"definitions\":[{\"id\":\"e1c905e7-797f-4e53-92b6-0f84ad0b86d6\",\"name\":\"ALL\",\"properties\":{\"__incoming_connections\":\"list(urn:a8187df2-ee1b-4f90-99ec-5e61c587b2ef)\",\"__connections\":\"list(urn:6ccada96-3c12-4cbb-8b2e-b2ad2e339463,urn:36c1237f-90e4-496d-be23-25233769d062,urn:b65ca8ea-a5ef-46c3-9218-bd0e856b5996)\",\"__next_in_chain\":\"urn:b65ca8ea-a5ef-46c3-9218-bd0e856b5996\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(urn:b65ca8ea-a5ef-46c3-9218-bd0e856b5996)\",\"name\":\"Fetch data\",\"_breakpoint\":false,\"x\":\"561\",\"y\":\"265\",\"__connectionsALL_CONNECTION\":\"list(urn:6ccada96-3c12-4cbb-8b2e-b2ad2e339463,urn:36c1237f-90e4-496d-be23-25233769d062)\"}},{\"id\":\"55ef6b9a-af08-41c1-9d1a-809a1d26a3dd\",\"name\":\"FOR_EACH\",\"properties\":{\"__incoming_connections\":\"list(urn:aad5d2ca-8869-4644-b883-6545310cad16)\",\"__connections\":\"list(f2-ee1b-4f90-99ec-5e61c587b2e,urn:a8187df2-ee1b-4f90-99ec-5e61c587b2e,urn:7c937ff9-a874-49e8-96c7-e934d3cf7ea9,urn:a8187df2-ee1b-4f90-99ec-5e61c587b2ef)\",\"__next_in_chain\":\"urn:7c937ff9-a874-49e8-96c7-e934d3cf7ea9\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(,urn:7c937ff9-a874-49e8-96c7-e934d3cf7ea9)\",\"name\":\"For each publication id\",\"__connectionsFOR_EACH_CONNECTION\":\"list(urn:a8187df2-ee1b-4f90-99ec-5e61c587b2ef)\",\"_breakpoint\":false,\"x\":\"528\",\"y\":\"201\"}},{\"id\":\"478437ce-bfff-4757-ad69-7ddcda980167\",\"name\":\"SQL_SELECT\",\"properties\":{\"__incoming_connections\":\"list(urn:28077208-86b5-4182-8c02-8de5218e66d3,urn:b0faf55a-1a84-4ac8-bd1d-d8cb991b929e)\",\"__connections\":\"list(urn:aad5d2ca-8869-4644-b883-6545310cad16)\",\"__next_in_chain\":\"urn:aad5d2ca-8869-4644-b883-6545310cad16\",\"connector\":\"DB\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(urn:aad5d2ca-8869-4644-b883-6545310cad16)\",\"name\":\"Fetch publication ids\",\"selectExpression\":\"\'select publication_researcher.publication_id from lifia_site.publication_researcher inner join lifia_site.researchers on researchers.researcher_id = publication_researcher.researcher_id where researchers.friendly_key = ?\'\",\"_breakpoint\":false,\"x\":\"344\",\"y\":\"269\",\"parameterExpressions\":\"message.payload\"}},{\"id\":\"f1d11de7-245b-45d8-a170-20c412ca7f5e\",\"name\":\"SQL_SELECT\",\"properties\":{\"__incoming_connections\":\"list(urn:af4675e2-66da-4a4c-997b-27df92e1e2a1,urn:5167909d-5840-45d8-8604-7b8de6672853)\",\"__connections\":\"list(,urn:b3ed0d6d-a209-4c4f-8011-219b2bd10ef3)\",\"__next_in_chain\":\"urn:b3ed0d6d-a209-4c4f-8011-219b2bd10ef3\",\"connector\":\"DB\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(,urn:b3ed0d6d-a209-4c4f-8011-219b2bd10ef3)\",\"name\":\"Fetch list of researchers\",\"selectExpression\":\"\'SELECT * FROM lifia_site.researchers order by last_name\'\",\"_breakpoint\":false,\"x\":\"335\",\"y\":\"10\"}},{\"id\":\"5cba053b-17b9-4b5f-9844-3472f61d87f8\",\"name\":\"RESOURCE_DUST_RENDERER\",\"properties\":{\"__incoming_connections\":\"list(urn:f024c4df-c508-42a4-8bbb-8640460191e9,urn:7b2765fd-c2fd-429f-ae6a-9d4f96bd3abd)\",\"templateRenderingList\":\"(templates\\/publications.tl,main,message.payload)\",\"resourcesList\":\"lib\\/dust.js;lib\\/jquery-2.0.3.min.js;css\\/site_map.css;css\\/inproceedings.css;css\\/referencias.css;css\\/pag_personales.css\",\"name\":\"PublicationsPage\",\"_breakpoint\":false,\"x\":\"871\",\"y\":\"201\",\"bodyTemplatePath\":\"body.tl\"}},{\"id\":\"f5296eb9-c324-4895-b6e3-3899c5d46631\",\"name\":\"GROOVY\",\"properties\":{\"__incoming_connections\":\"list(urn:c66d5c2c-db31-4c93-9cdf-a30718211daa)\",\"__connections\":\"list(urn:9cf3485c-68ee-48e4-bddb-7de787fcae47)\",\"__next_in_chain\":\"urn:9cf3485c-68ee-48e4-bddb-7de787fcae47\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(urn:9cf3485c-68ee-48e4-bddb-7de787fcae47)\",\"name\":\"Compose researcher JSON\",\"_breakpoint\":false,\"x\":\"762\",\"y\":\"141\",\"script\":\"import groovy.json.*\\n\\ndef researcher = message.payload[0]\\ndef root = [\\n\\t\'firstName\' : researcher[1],\\n    \'lastName\' : researcher[2],\\n    \'friendlyKey\' : researcher[3]\\n]\\n\\nmessage.payload = new JsonBuilder(root).toString()\"}},{\"id\":\"4f455139-d4d3-4043-a3cd-07f73b79169d\",\"name\":\"CHOICE\",\"properties\":{\"__connectionsCHOICE_CONNECTION\":\"list(urn:5167909d-5840-45d8-8604-7b8de6672853,urn:3eefa003-8ec7-41d8-b92b-b60530d3d554,urn:52e97a4a-6478-4fa0-b1b5-669fa9e4b87d)\",\"__incoming_connections\":\"list(urn:4962d86a-465e-4677-bd77-d2aeccdfaf5f)\",\"__connections\":\"list(e66d3,urn:af4675e2-66da-4a4c-997b-27df92e1e,urn:a3115d33-9610-4401-8940-3bdd4348,urn:5167909d-5840-45d8-8604-7b8de6672853,urn:3eefa003-8ec7-41d8-b92b-b60530d3d554,urn:52e97a4a-6478-4fa0-b1b5-669fa9e4b87d)\",\"name\":\"Path router\",\"_breakpoint\":false,\"x\":\"370\",\"y\":\"128\"}},{\"id\":\"29491781-d77c-4da3-9970-ee5ad9073162\",\"name\":\"SQL_SELECT\",\"properties\":{\"__incoming_connections\":\"list(urn:7dc05e81-da79-40de-9772-5617addad26e,urn:6f9f45ab-9430-4d8b-9493-02eed271925d)\",\"__connections\":\"list(,urn:c66d5c2c-db31-4c93-9cdf-a30718211daa)\",\"__next_in_chain\":\"urn:c66d5c2c-db31-4c93-9cdf-a30718211daa\",\"connector\":\"DB\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(,urn:c66d5c2c-db31-4c93-9cdf-a30718211daa)\",\"name\":\"Fetch profile info\",\"selectExpression\":\"\'select * from lifia_site.researchers where friendly_key = ?\'\",\"_breakpoint\":false,\"x\":\"590\",\"y\":\"141\",\"parameterExpressions\":\"message.payload\"}},{\"id\":\"e4aad7e0-9d1b-47c7-8b2c-2b8a71b97455\",\"name\":\"RESOURCE_DUST_RENDERER\",\"properties\":{\"__incoming_connections\":\"list(urn:eff77bfc-ffdc-4f93-8249-18ffc10c91ae,urn:eab2c198-c405-4233-a3b0-ca9c5c28bae6)\",\"templateRenderingList\":\"(templates\\/researchers_main.tl,main,message.payload)\",\"resourcesList\":\"lib\\/dust.js;lib\\/jquery-2.0.3.min.js;css\\/site_map.css;css\\/inproceedings.css;css\\/referencias.css;css\\/pag_personales.css\",\"name\":\"ResearchersPage\",\"_breakpoint\":false,\"x\":\"750\",\"y\":\"10\",\"bodyTemplatePath\":\"body.tl\"}},{\"id\":\"0d87f9b7-b1d7-4f3a-82a6-938f0b814fa1\",\"name\":\"RESOURCE_DUST_RENDERER\",\"properties\":{\"__incoming_connections\":\"list(urn:496bf0e5-a168-4c82-8c9a-73640ce89613,urn:9cf3485c-68ee-48e4-bddb-7de787fcae47)\",\"templateRenderingList\":\"(templates\\/researcher.tl,main,message.payload)\",\"resourcesList\":\"lib\\/dust.js;lib\\/jquery-2.0.3.min.js;css\\/site_map.css;css\\/inproceedings.css;css\\/referencias.css;css\\/pag_personales.css\",\"name\":\"ProfilePage\",\"_breakpoint\":true,\"x\":\"805\",\"y\":\"69\",\"bodyTemplatePath\":\"body.tl\"}},{\"id\":\"627b263c-142c-45f1-b621-def812c0a1fb\",\"name\":\"GROOVY\",\"properties\":{\"__incoming_connections\":\"list(urn:7c937ff9-a874-49e8-96c7-e934d3cf7ea9)\",\"__connections\":\"list(urn:7b2765fd-c2fd-429f-ae6a-9d4f96bd3abd)\",\"__next_in_chain\":\"urn:7b2765fd-c2fd-429f-ae6a-9d4f96bd3abd\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(urn:7b2765fd-c2fd-429f-ae6a-9d4f96bd3abd)\",\"name\":\"Merge publication JSONs\",\"_breakpoint\":false,\"x\":\"694\",\"y\":\"201\",\"script\":\"import org.apache.commons.lang.StringUtils\\n\\n  \\ndef jsons = message.payload\\nmessage.payload = \'{ \\\"publications\\\" : [ \' + StringUtils.join(jsons, \',\') + \' ] }\'\\n\\n\\n\"}},{\"id\":\"14cde4bb-206e-4a4b-9634-59a9e46e4328\",\"name\":\"SQL_SELECT\",\"properties\":{\"__incoming_connections\":\"list(urn:6ccada96-3c12-4cbb-8b2e-b2ad2e339463)\",\"connector\":\"DB\",\"name\":\"Fetch authors\",\"selectExpression\":\"\'select researchers.* from lifia_site.publication_researcher inner join lifia_site.researchers on researchers.researcher_id = publication_researcher.researcher_id where publication_researcher.publication_id = ? order by researcher_order\'\",\"_breakpoint\":false,\"x\":\"727\",\"y\":\"247\",\"parameterExpressions\":\"message.payload[0]\"}},{\"id\":\"c1517121-57ec-432e-a798-00582777f894\",\"name\":\"GROOVY\",\"properties\":{\"__incoming_connections\":\"list(urn:e916917d-5e1b-4c3a-91ac-fd41f5347ebf,urn:71b52b3c-3b6f-4cd6-9e49-b2cfb97c0684,urn:e0048381-3dd7-4676-9821-18986eaafdf1,urn:3eefa003-8ec7-41d8-b92b-b60530d3d554)\",\"__connections\":\"list(urn:6f9f45ab-9430-4d8b-9493-02eed271925d)\",\"__next_in_chain\":\"urn:6f9f45ab-9430-4d8b-9493-02eed271925d\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(urn:6f9f45ab-9430-4d8b-9493-02eed271925d)\",\"name\":\"Extract friendly key\",\"_breakpoint\":false,\"x\":\"584\",\"y\":\"69\",\"script\":\"def url = message.properties[\'actions.http.requestURI\']\\ndef parts = url.split(\'\\/\')\\ndef lastPart = parts[parts.length - 1]\\nif (!lastPart) {\\n  lastPart = parts[parts.length - 2]\\n}\\nmessage.payload = lastPart\"}},{\"id\":\"bed32c10-5c89-4abf-8209-bd494de3bb6c\",\"name\":\"HTTP_MESSAGE_SOURCE\",\"properties\":{\"__connections\":\"list(urn:4962d86a-465e-4677-bd77-d2aeccdfaf5f)\",\"__next_in_chain\":\"urn:4962d86a-465e-4677-bd77-d2aeccdfaf5f\",\"port\":\"8822\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(urn:4962d86a-465e-4677-bd77-d2aeccdfaf5f)\",\"name\":\"HTTP listener\",\"_breakpoint\":false,\"x\":\"178\",\"y\":\"128\"}},{\"id\":\"76798eee-2611-4716-98f7-c0d9b553fdb7\",\"name\":\"SQL_SELECT\",\"properties\":{\"__incoming_connections\":\"list(urn:36c1237f-90e4-496d-be23-25233769d062)\",\"connector\":\"DB\",\"name\":\"Fetch publication info\",\"selectExpression\":\"\'select * from lifia_site.publications where publication_id = ?\'\",\"_breakpoint\":false,\"x\":\"727\",\"y\":\"293\",\"parameterExpressions\":\"message.payload[0]\"}},{\"id\":\"a88aafc7-1030-4079-8b88-cb5be09919d1\",\"name\":\"GROOVY\",\"properties\":{\"__incoming_connections\":\"list(urn:b3ed0d6d-a209-4c4f-8011-219b2bd10ef3)\",\"__connections\":\"list(urn:eab2c198-c405-4233-a3b0-ca9c5c28bae6)\",\"__next_in_chain\":\"urn:eab2c198-c405-4233-a3b0-ca9c5c28bae6\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(urn:eab2c198-c405-4233-a3b0-ca9c5c28bae6)\",\"name\":\"Compose Researchers JSON\",\"_breakpoint\":false,\"x\":\"529\",\"y\":\"10\",\"script\":\"import groovy.json.*\\n\\ndef researchers = message.payload\\ndef researchersJSON = []\\ndef root = [:]\\n\\nfor (researcher in researchers) {\\n\\tdef researcherJSON = [\\n      \'firstName\' : researcher[1],\\n      \'lastName\' : researcher[2],\\n      \'friendlyKey\' : researcher[3]\\n    ]\\n    researchersJSON << researcherJSON\\n}\\n\\nroot.researchers = researchersJSON\\n\\nmessage.payload = new JsonBuilder(root).toString()\"}},{\"id\":\"0eae3594-4861-4d98-a509-e9299efd1abb\",\"name\":\"GROOVY\",\"properties\":{\"__incoming_connections\":\"list(urn:a3115d33-9610-4401-8940-3bdd4348c762,urn:52e97a4a-6478-4fa0-b1b5-669fa9e4b87d)\",\"__connections\":\"list(urn:b0faf55a-1a84-4ac8-bd1d-d8cb991b929e)\",\"__next_in_chain\":\"urn:b0faf55a-1a84-4ac8-bd1d-d8cb991b929e\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(urn:b0faf55a-1a84-4ac8-bd1d-d8cb991b929e)\",\"name\":\"Extract friendlyKey\",\"_breakpoint\":false,\"x\":\"349\",\"y\":\"201\",\"script\":\"def url = message.properties[\'actions.http.requestURI\']\\ndef parts = url.split(\'\\/\')\\ndef lastPart = parts[parts.length - 2]\\nif (!lastPart) {\\n  lastPart = parts[parts.length - 3]\\n}\\nmessage.payload = lastPart\"}},{\"id\":\"07ef4214-cda6-449f-89e1-44e6bbac4c6d\",\"name\":\"GROOVY\",\"properties\":{\"__incoming_connections\":\"list(urn:a99f9642-cf15-4384-bbc7-7128f085029b,urn:b65ca8ea-a5ef-46c3-9218-bd0e856b5996)\",\"name\":\"Compose publication data\",\"_breakpoint\":false,\"x\":\"518\",\"y\":\"326\",\"script\":\"import groovy.json.*\\n\\ndef publicationInfo = message.properties[\'publicationInfo\'][0]\\ndef authors = message.properties[\'authors\']\\n\\ndef authorsJSON = []\\n\\nfor (author in authors) {\\n\\tdef authorJSON = [\\n      \'firstName\' : author[1],\\n      \'lastName\' : author[2],\\n      \'friendlyKey\' : author[3],\\n      \'pictureFilename\' : author[5],\\n    ]\\n    authorsJSON << authorJSON\\n}\\n\\ndef json = [\\n  \\t\'title\' : publicationInfo[1],\\n  \\t\'conference\' : publicationInfo[2],\\n  \\t\'year\' : publicationInfo[3],\\n\\t\'authors\' : authorsJSON  \\n]\\n\\nmessage.payload = new JsonBuilder(json).toString()\"}},{\"id\":\"eab2c198-c405-4233-a3b0-ca9c5c28bae6\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"713,20;750,20;\",\"source\":\"urn:a88aafc7-1030-4079-8b88-cb5be09919d1\",\"_breakpoint\":false,\"target\":\"urn:e4aad7e0-9d1b-47c7-8b2c-2b8a71b97455\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"52e97a4a-6478-4fa0-b1b5-669fa9e4b87d\",\"name\":\"CHOICE_CONNECTION\",\"properties\":{\"points\":\"411,148;411,201;\",\"expression\":\"(message.properties[\'actions.http.requestURI\'] =~ \'\\\\\\\\\\/profile\\\\\\\\\\/[A-z]+\\\\\\\\\\/publications\').matches()\",\"source\":\"urn:4f455139-d4d3-4043-a3cd-07f73b79169d\",\"_breakpoint\":false,\"target\":\"urn:0eae3594-4861-4d98-a509-e9299efd1abb\",\"type\":\"CHOICE_CONNECTION\"}},{\"id\":\"b3ed0d6d-a209-4c4f-8011-219b2bd10ef3\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"487,20;529,20;\",\"source\":\"urn:f1d11de7-245b-45d8-a170-20c412ca7f5e\",\"_breakpoint\":false,\"target\":\"urn:a88aafc7-1030-4079-8b88-cb5be09919d1\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"aad5d2ca-8869-4644-b883-6545310cad16\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"439,269;574,221;\",\"source\":\"urn:478437ce-bfff-4757-ad69-7ddcda980167\",\"_breakpoint\":false,\"target\":\"urn:55ef6b9a-af08-41c1-9d1a-809a1d26a3dd\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"6f9f45ab-9430-4d8b-9493-02eed271925d\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"647,89;647,141;\",\"source\":\"urn:c1517121-57ec-432e-a798-00582777f894\",\"_breakpoint\":false,\"target\":\"urn:29491781-d77c-4da3-9970-ee5ad9073162\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"b0faf55a-1a84-4ac8-bd1d-d8cb991b929e\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"411,221;411,269;\",\"source\":\"urn:0eae3594-4861-4d98-a509-e9299efd1abb\",\"_breakpoint\":false,\"target\":\"urn:478437ce-bfff-4757-ad69-7ddcda980167\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"c66d5c2c-db31-4c93-9cdf-a30718211daa\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"703,151;762,151;\",\"source\":\"urn:29491781-d77c-4da3-9970-ee5ad9073162\",\"_breakpoint\":false,\"target\":\"urn:f5296eb9-c324-4895-b6e3-3899c5d46631\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"5167909d-5840-45d8-8604-7b8de6672853\",\"name\":\"CHOICE_CONNECTION\",\"properties\":{\"points\":\"411,128;411,30;\",\"expression\":\"message.properties[\'actions.http.requestURI\'] == \'\\/\'\",\"source\":\"urn:4f455139-d4d3-4043-a3cd-07f73b79169d\",\"_breakpoint\":false,\"target\":\"urn:f1d11de7-245b-45d8-a170-20c412ca7f5e\",\"type\":\"CHOICE_CONNECTION\"}},{\"id\":\"a8187df2-ee1b-4f90-99ec-5e61c587b2ef\",\"name\":\"FOR_EACH_CONNECTION\",\"properties\":{\"points\":\"601,221;601,265;\",\"source\":\"urn:55ef6b9a-af08-41c1-9d1a-809a1d26a3dd\",\"_breakpoint\":false,\"target\":\"urn:e1c905e7-797f-4e53-92b6-0f84ad0b86d6\",\"type\":\"FOR_EACH_CONNECTION\"}},{\"id\":\"6ccada96-3c12-4cbb-8b2e-b2ad2e339463\",\"name\":\"ALL_CONNECTION\",\"properties\":{\"points\":\"641,271;727,262;\",\"source\":\"urn:e1c905e7-797f-4e53-92b6-0f84ad0b86d6\",\"_breakpoint\":false,\"targetExpression\":\"expression:groovy:message.properties[\'authors\'] = result.payload\",\"target\":\"urn:14cde4bb-206e-4a4b-9634-59a9e46e4328\",\"type\":\"ALL_CONNECTION\"}},{\"id\":\"9cf3485c-68ee-48e4-bddb-7de787fcae47\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"849,141;849,89;\",\"source\":\"urn:f5296eb9-c324-4895-b6e3-3899c5d46631\",\"_breakpoint\":false,\"target\":\"urn:0d87f9b7-b1d7-4f3a-82a6-938f0b814fa1\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"36c1237f-90e4-496d-be23-25233769d062\",\"name\":\"ALL_CONNECTION\",\"properties\":{\"points\":\"641,281;727,293;\",\"source\":\"urn:e1c905e7-797f-4e53-92b6-0f84ad0b86d6\",\"_breakpoint\":false,\"targetExpression\":\"expression:groovy:message.properties[\'publicationInfo\'] = result.payload\",\"target\":\"urn:76798eee-2611-4716-98f7-c0d9b553fdb7\",\"type\":\"ALL_CONNECTION\"}},{\"id\":\"4962d86a-465e-4677-bd77-d2aeccdfaf5f\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"275,138;370,138;\",\"source\":\"urn:bed32c10-5c89-4abf-8209-bd494de3bb6c\",\"_breakpoint\":false,\"target\":\"urn:4f455139-d4d3-4043-a3cd-07f73b79169d\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"b65ca8ea-a5ef-46c3-9218-bd0e856b5996\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"601,285;601,326;\",\"source\":\"urn:e1c905e7-797f-4e53-92b6-0f84ad0b86d6\",\"_breakpoint\":false,\"target\":\"urn:07ef4214-cda6-449f-89e1-44e6bbac4c6d\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"7b2765fd-c2fd-429f-ae6a-9d4f96bd3abd\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"856,211;871,211;\",\"source\":\"urn:627b263c-142c-45f1-b621-def812c0a1fb\",\"_breakpoint\":false,\"target\":\"urn:5cba053b-17b9-4b5f-9844-3472f61d87f8\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"3eefa003-8ec7-41d8-b92b-b60530d3d554\",\"name\":\"CHOICE_CONNECTION\",\"properties\":{\"points\":\"451,128;607,89;\",\"expression\":\"(message.properties[\'actions.http.requestURI\'] =~ \'\\\\\\\\\\/profile\\\\\\\\\\/[A-z]+\\\\\\\\\\/?\').matches()\",\"source\":\"urn:4f455139-d4d3-4043-a3cd-07f73b79169d\",\"_breakpoint\":false,\"target\":\"urn:c1517121-57ec-432e-a798-00582777f894\",\"type\":\"CHOICE_CONNECTION\"}},{\"id\":\"7c937ff9-a874-49e8-96c7-e934d3cf7ea9\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"675,211;694,211;\",\"source\":\"urn:55ef6b9a-af08-41c1-9d1a-809a1d26a3dd\",\"_breakpoint\":false,\"target\":\"urn:627b263c-142c-45f1-b621-def812c0a1fb\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}}]}',5,NULL);


INSERT INTO `flows` (`flow_id`, `name`, `json_representation`, `application_id`, `application_snapshot_id`) VALUES (35,'4a3b2c45-31f9-4e13-a869-94c59b8417ee','{\"id\":\"4a3b2c45-31f9-4e13-a869-94c59b8417ee\",\"version\":0,\"definitions\":[{\"id\":\"e1c905e7-797f-4e53-92b6-0f84ad0b86d6\",\"name\":\"ALL\",\"properties\":{\"__incoming_connections\":\"list(urn:a8187df2-ee1b-4f90-99ec-5e61c587b2ef)\",\"__connections\":\"list(urn:6ccada96-3c12-4cbb-8b2e-b2ad2e339463,urn:36c1237f-90e4-496d-be23-25233769d062,urn:b65ca8ea-a5ef-46c3-9218-bd0e856b5996)\",\"__next_in_chain\":\"urn:b65ca8ea-a5ef-46c3-9218-bd0e856b5996\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(urn:b65ca8ea-a5ef-46c3-9218-bd0e856b5996)\",\"name\":\"Fetch data\",\"_breakpoint\":false,\"x\":\"561\",\"y\":\"265\",\"__connectionsALL_CONNECTION\":\"list(urn:6ccada96-3c12-4cbb-8b2e-b2ad2e339463,urn:36c1237f-90e4-496d-be23-25233769d062)\"}},{\"id\":\"55ef6b9a-af08-41c1-9d1a-809a1d26a3dd\",\"name\":\"FOR_EACH\",\"properties\":{\"__incoming_connections\":\"list(urn:aad5d2ca-8869-4644-b883-6545310cad16)\",\"__connections\":\"list(f2-ee1b-4f90-99ec-5e61c587b2e,urn:a8187df2-ee1b-4f90-99ec-5e61c587b2e,urn:7c937ff9-a874-49e8-96c7-e934d3cf7ea9,urn:a8187df2-ee1b-4f90-99ec-5e61c587b2ef)\",\"__next_in_chain\":\"urn:7c937ff9-a874-49e8-96c7-e934d3cf7ea9\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(,urn:7c937ff9-a874-49e8-96c7-e934d3cf7ea9)\",\"name\":\"For each publication id\",\"__connectionsFOR_EACH_CONNECTION\":\"list(urn:a8187df2-ee1b-4f90-99ec-5e61c587b2ef)\",\"_breakpoint\":false,\"x\":\"528\",\"y\":\"201\"}},{\"id\":\"478437ce-bfff-4757-ad69-7ddcda980167\",\"name\":\"SQL_SELECT\",\"properties\":{\"__incoming_connections\":\"list(urn:28077208-86b5-4182-8c02-8de5218e66d3,urn:b0faf55a-1a84-4ac8-bd1d-d8cb991b929e)\",\"__connections\":\"list(urn:aad5d2ca-8869-4644-b883-6545310cad16)\",\"__next_in_chain\":\"urn:aad5d2ca-8869-4644-b883-6545310cad16\",\"connector\":\"DB\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(urn:aad5d2ca-8869-4644-b883-6545310cad16)\",\"name\":\"Fetch publication ids\",\"selectExpression\":\"\'select publication_researcher.publication_id from lifia_site.publication_researcher inner join lifia_site.researchers on researchers.researcher_id = publication_researcher.researcher_id where researchers.friendly_key = ?\'\",\"_breakpoint\":false,\"x\":\"344\",\"y\":\"269\",\"parameterExpressions\":\"message.payload\"}},{\"id\":\"f1d11de7-245b-45d8-a170-20c412ca7f5e\",\"name\":\"SQL_SELECT\",\"properties\":{\"__incoming_connections\":\"list(urn:af4675e2-66da-4a4c-997b-27df92e1e2a1,urn:5167909d-5840-45d8-8604-7b8de6672853)\",\"__connections\":\"list(,urn:b3ed0d6d-a209-4c4f-8011-219b2bd10ef3)\",\"__next_in_chain\":\"urn:b3ed0d6d-a209-4c4f-8011-219b2bd10ef3\",\"connector\":\"DB\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(,urn:b3ed0d6d-a209-4c4f-8011-219b2bd10ef3)\",\"name\":\"Fetch list of researchers\",\"selectExpression\":\"\'SELECT * FROM lifia_site.researchers order by last_name\'\",\"_breakpoint\":false,\"x\":\"335\",\"y\":\"10\"}},{\"id\":\"5cba053b-17b9-4b5f-9844-3472f61d87f8\",\"name\":\"RESOURCE_DUST_RENDERER\",\"properties\":{\"__incoming_connections\":\"list(urn:f024c4df-c508-42a4-8bbb-8640460191e9,urn:7b2765fd-c2fd-429f-ae6a-9d4f96bd3abd)\",\"templateRenderingList\":\"(templates\\/publications_main.tl,main,message.payload)\",\"resourcesList\":\"lib\\/dust.js;lib\\/jquery-2.0.3.min.js;css\\/site_map.css;css\\/inproceedings.css;css\\/referencias.css;css\\/pag_personales.css;css\\/estilos_lifia.css\",\"name\":\"PublicationsPage\",\"_breakpoint\":false,\"x\":\"871\",\"y\":\"201\",\"bodyTemplatePath\":\"body.tl\"}},{\"id\":\"f5296eb9-c324-4895-b6e3-3899c5d46631\",\"name\":\"GROOVY\",\"properties\":{\"__incoming_connections\":\"list(urn:c66d5c2c-db31-4c93-9cdf-a30718211daa)\",\"__connections\":\"list(urn:9cf3485c-68ee-48e4-bddb-7de787fcae47)\",\"__next_in_chain\":\"urn:9cf3485c-68ee-48e4-bddb-7de787fcae47\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(urn:9cf3485c-68ee-48e4-bddb-7de787fcae47)\",\"name\":\"Compose researcher JSON\",\"_breakpoint\":false,\"x\":\"762\",\"y\":\"141\",\"script\":\"import groovy.json.*\\n\\ndef researcher = message.payload[0]\\ndef root = [\\n\\t\'firstName\' : researcher[1],\\n    \'lastName\' : researcher[2],\\n    \'friendlyKey\' : researcher[3]\\n]\\n\\nmessage.payload = new JsonBuilder(root).toString()\"}},{\"id\":\"4f455139-d4d3-4043-a3cd-07f73b79169d\",\"name\":\"CHOICE\",\"properties\":{\"__connectionsCHOICE_CONNECTION\":\"list(urn:5167909d-5840-45d8-8604-7b8de6672853,urn:3eefa003-8ec7-41d8-b92b-b60530d3d554,urn:52e97a4a-6478-4fa0-b1b5-669fa9e4b87d)\",\"__incoming_connections\":\"list(urn:4962d86a-465e-4677-bd77-d2aeccdfaf5f)\",\"__connections\":\"list(e66d3,urn:af4675e2-66da-4a4c-997b-27df92e1e,urn:a3115d33-9610-4401-8940-3bdd4348,urn:5167909d-5840-45d8-8604-7b8de6672853,urn:3eefa003-8ec7-41d8-b92b-b60530d3d554,urn:52e97a4a-6478-4fa0-b1b5-669fa9e4b87d)\",\"name\":\"Path router\",\"_breakpoint\":false,\"x\":\"370\",\"y\":\"128\"}},{\"id\":\"29491781-d77c-4da3-9970-ee5ad9073162\",\"name\":\"SQL_SELECT\",\"properties\":{\"__incoming_connections\":\"list(urn:7dc05e81-da79-40de-9772-5617addad26e,urn:6f9f45ab-9430-4d8b-9493-02eed271925d)\",\"__connections\":\"list(,urn:c66d5c2c-db31-4c93-9cdf-a30718211daa)\",\"__next_in_chain\":\"urn:c66d5c2c-db31-4c93-9cdf-a30718211daa\",\"connector\":\"DB\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(,urn:c66d5c2c-db31-4c93-9cdf-a30718211daa)\",\"name\":\"Fetch profile info\",\"selectExpression\":\"\'select * from lifia_site.researchers where friendly_key = ?\'\",\"_breakpoint\":false,\"x\":\"590\",\"y\":\"141\",\"parameterExpressions\":\"message.payload\"}},{\"id\":\"e4aad7e0-9d1b-47c7-8b2c-2b8a71b97455\",\"name\":\"RESOURCE_DUST_RENDERER\",\"properties\":{\"__incoming_connections\":\"list(urn:eff77bfc-ffdc-4f93-8249-18ffc10c91ae,urn:eab2c198-c405-4233-a3b0-ca9c5c28bae6)\",\"templateRenderingList\":\"(templates\\/researchers_main.tl,main,message.payload)\",\"resourcesList\":\"lib\\/dust.js;lib\\/jquery-2.0.3.min.js;css\\/site_map.css;css\\/inproceedings.css;css\\/referencias.css;css\\/pag_personales.css;css\\/estilos_lifia.css\",\"name\":\"ResearchersPage\",\"_breakpoint\":false,\"x\":\"750\",\"y\":\"10\",\"bodyTemplatePath\":\"body.tl\"}},{\"id\":\"0d87f9b7-b1d7-4f3a-82a6-938f0b814fa1\",\"name\":\"RESOURCE_DUST_RENDERER\",\"properties\":{\"__incoming_connections\":\"list(urn:496bf0e5-a168-4c82-8c9a-73640ce89613,urn:9cf3485c-68ee-48e4-bddb-7de787fcae47)\",\"templateRenderingList\":\"(templates\\/researcher_main.tl,main,message.payload)\",\"resourcesList\":\"lib\\/dust.js;lib\\/jquery-2.0.3.min.js;css\\/site_map.css;css\\/inproceedings.css;css\\/referencias.css;css\\/pag_personales.css;css\\/estilos_lifia.css\",\"name\":\"ProfilePage\",\"_breakpoint\":true,\"x\":\"805\",\"y\":\"69\",\"bodyTemplatePath\":\"body.tl\"}},{\"id\":\"627b263c-142c-45f1-b621-def812c0a1fb\",\"name\":\"GROOVY\",\"properties\":{\"__incoming_connections\":\"list(urn:7c937ff9-a874-49e8-96c7-e934d3cf7ea9)\",\"__connections\":\"list(urn:7b2765fd-c2fd-429f-ae6a-9d4f96bd3abd)\",\"__next_in_chain\":\"urn:7b2765fd-c2fd-429f-ae6a-9d4f96bd3abd\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(urn:7b2765fd-c2fd-429f-ae6a-9d4f96bd3abd)\",\"name\":\"Merge publication JSONs\",\"_breakpoint\":false,\"x\":\"694\",\"y\":\"201\",\"script\":\"import org.apache.commons.lang.StringUtils\\n\\n  \\ndef jsons = message.payload\\nmessage.payload = \'{ \\\"publications\\\" : [ \' + StringUtils.join(jsons, \',\') + \' ] }\'\\n\\n\\n\"}},{\"id\":\"14cde4bb-206e-4a4b-9634-59a9e46e4328\",\"name\":\"SQL_SELECT\",\"properties\":{\"__incoming_connections\":\"list(urn:6ccada96-3c12-4cbb-8b2e-b2ad2e339463)\",\"connector\":\"DB\",\"name\":\"Fetch authors\",\"selectExpression\":\"\'select researchers.* from lifia_site.publication_researcher inner join lifia_site.researchers on researchers.researcher_id = publication_researcher.researcher_id where publication_researcher.publication_id = ? order by researcher_order\'\",\"_breakpoint\":false,\"x\":\"727\",\"y\":\"247\",\"parameterExpressions\":\"message.payload[0]\"}},{\"id\":\"c1517121-57ec-432e-a798-00582777f894\",\"name\":\"GROOVY\",\"properties\":{\"__incoming_connections\":\"list(urn:e916917d-5e1b-4c3a-91ac-fd41f5347ebf,urn:71b52b3c-3b6f-4cd6-9e49-b2cfb97c0684,urn:e0048381-3dd7-4676-9821-18986eaafdf1,urn:3eefa003-8ec7-41d8-b92b-b60530d3d554)\",\"__connections\":\"list(urn:6f9f45ab-9430-4d8b-9493-02eed271925d)\",\"__next_in_chain\":\"urn:6f9f45ab-9430-4d8b-9493-02eed271925d\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(urn:6f9f45ab-9430-4d8b-9493-02eed271925d)\",\"name\":\"Extract friendly key\",\"_breakpoint\":false,\"x\":\"584\",\"y\":\"69\",\"script\":\"def url = message.properties[\'actions.http.requestURI\']\\ndef parts = url.split(\'\\/\')\\ndef lastPart = parts[parts.length - 1]\\nif (!lastPart) {\\n  lastPart = parts[parts.length - 2]\\n}\\nmessage.payload = lastPart\"}},{\"id\":\"bed32c10-5c89-4abf-8209-bd494de3bb6c\",\"name\":\"HTTP_MESSAGE_SOURCE\",\"properties\":{\"__connections\":\"list(urn:4962d86a-465e-4677-bd77-d2aeccdfaf5f)\",\"__next_in_chain\":\"urn:4962d86a-465e-4677-bd77-d2aeccdfaf5f\",\"port\":\"8822\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(urn:4962d86a-465e-4677-bd77-d2aeccdfaf5f)\",\"name\":\"HTTP listener\",\"_breakpoint\":false,\"x\":\"178\",\"y\":\"128\"}},{\"id\":\"76798eee-2611-4716-98f7-c0d9b553fdb7\",\"name\":\"SQL_SELECT\",\"properties\":{\"__incoming_connections\":\"list(urn:36c1237f-90e4-496d-be23-25233769d062)\",\"connector\":\"DB\",\"name\":\"Fetch publication info\",\"selectExpression\":\"\'select * from lifia_site.publications where publication_id = ?\'\",\"_breakpoint\":false,\"x\":\"727\",\"y\":\"293\",\"parameterExpressions\":\"message.payload[0]\"}},{\"id\":\"a88aafc7-1030-4079-8b88-cb5be09919d1\",\"name\":\"GROOVY\",\"properties\":{\"__incoming_connections\":\"list(urn:b3ed0d6d-a209-4c4f-8011-219b2bd10ef3)\",\"__connections\":\"list(urn:eab2c198-c405-4233-a3b0-ca9c5c28bae6)\",\"__next_in_chain\":\"urn:eab2c198-c405-4233-a3b0-ca9c5c28bae6\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(urn:eab2c198-c405-4233-a3b0-ca9c5c28bae6)\",\"name\":\"Compose Researchers JSON\",\"_breakpoint\":false,\"x\":\"529\",\"y\":\"10\",\"script\":\"import groovy.json.*\\n\\ndef researchers = message.payload\\ndef researchersJSON = []\\ndef root = [:]\\n\\nfor (researcher in researchers) {\\n\\tdef researcherJSON = [\\n      \'firstName\' : researcher[1],\\n      \'lastName\' : researcher[2],\\n      \'friendlyKey\' : researcher[3]\\n    ]\\n    researchersJSON << researcherJSON\\n}\\n\\nroot.researchers = researchersJSON\\n\\nmessage.payload = new JsonBuilder(root).toString()\"}},{\"id\":\"0eae3594-4861-4d98-a509-e9299efd1abb\",\"name\":\"GROOVY\",\"properties\":{\"__incoming_connections\":\"list(urn:a3115d33-9610-4401-8940-3bdd4348c762,urn:52e97a4a-6478-4fa0-b1b5-669fa9e4b87d)\",\"__connections\":\"list(urn:b0faf55a-1a84-4ac8-bd1d-d8cb991b929e)\",\"__next_in_chain\":\"urn:b0faf55a-1a84-4ac8-bd1d-d8cb991b929e\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(urn:b0faf55a-1a84-4ac8-bd1d-d8cb991b929e)\",\"name\":\"Extract friendlyKey\",\"_breakpoint\":false,\"x\":\"349\",\"y\":\"201\",\"script\":\"def url = message.properties[\'actions.http.requestURI\']\\ndef parts = url.split(\'\\/\')\\ndef lastPart = parts[parts.length - 2]\\nif (!lastPart) {\\n  lastPart = parts[parts.length - 3]\\n}\\nmessage.payload = lastPart\"}},{\"id\":\"07ef4214-cda6-449f-89e1-44e6bbac4c6d\",\"name\":\"GROOVY\",\"properties\":{\"__incoming_connections\":\"list(urn:a99f9642-cf15-4384-bbc7-7128f085029b,urn:b65ca8ea-a5ef-46c3-9218-bd0e856b5996)\",\"name\":\"Compose publication data\",\"_breakpoint\":false,\"x\":\"518\",\"y\":\"326\",\"script\":\"import groovy.json.*\\n\\ndef publicationInfo = message.properties[\'publicationInfo\'][0]\\ndef authors = message.properties[\'authors\']\\n\\ndef authorsJSON = []\\n\\nfor (author in authors) {\\n\\tdef authorJSON = [\\n      \'firstName\' : author[1],\\n      \'lastName\' : author[2],\\n      \'friendlyKey\' : author[3],\\n      \'pictureFilename\' : author[5],\\n    ]\\n    authorsJSON << authorJSON\\n}\\n\\ndef json = [\\n  \\t\'title\' : publicationInfo[1],\\n  \\t\'conference\' : publicationInfo[2],\\n  \\t\'year\' : publicationInfo[3],\\n\\t\'authors\' : authorsJSON  \\n]\\n\\nmessage.payload = new JsonBuilder(json).toString()\"}},{\"id\":\"eab2c198-c405-4233-a3b0-ca9c5c28bae6\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"713,20;750,20;\",\"source\":\"urn:a88aafc7-1030-4079-8b88-cb5be09919d1\",\"_breakpoint\":false,\"target\":\"urn:e4aad7e0-9d1b-47c7-8b2c-2b8a71b97455\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"52e97a4a-6478-4fa0-b1b5-669fa9e4b87d\",\"name\":\"CHOICE_CONNECTION\",\"properties\":{\"points\":\"411,148;411,201;\",\"expression\":\"(message.properties[\'actions.http.requestURI\'] =~ \'\\\\\\\\\\/profile\\\\\\\\\\/[A-z]+\\\\\\\\\\/publications\').matches()\",\"source\":\"urn:4f455139-d4d3-4043-a3cd-07f73b79169d\",\"_breakpoint\":false,\"target\":\"urn:0eae3594-4861-4d98-a509-e9299efd1abb\",\"type\":\"CHOICE_CONNECTION\"}},{\"id\":\"b3ed0d6d-a209-4c4f-8011-219b2bd10ef3\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"487,20;529,20;\",\"source\":\"urn:f1d11de7-245b-45d8-a170-20c412ca7f5e\",\"_breakpoint\":false,\"target\":\"urn:a88aafc7-1030-4079-8b88-cb5be09919d1\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"aad5d2ca-8869-4644-b883-6545310cad16\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"439,269;574,221;\",\"source\":\"urn:478437ce-bfff-4757-ad69-7ddcda980167\",\"_breakpoint\":false,\"target\":\"urn:55ef6b9a-af08-41c1-9d1a-809a1d26a3dd\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"6f9f45ab-9430-4d8b-9493-02eed271925d\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"647,89;647,141;\",\"source\":\"urn:c1517121-57ec-432e-a798-00582777f894\",\"_breakpoint\":false,\"target\":\"urn:29491781-d77c-4da3-9970-ee5ad9073162\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"b0faf55a-1a84-4ac8-bd1d-d8cb991b929e\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"411,221;411,269;\",\"source\":\"urn:0eae3594-4861-4d98-a509-e9299efd1abb\",\"_breakpoint\":false,\"target\":\"urn:478437ce-bfff-4757-ad69-7ddcda980167\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"c66d5c2c-db31-4c93-9cdf-a30718211daa\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"703,151;762,151;\",\"source\":\"urn:29491781-d77c-4da3-9970-ee5ad9073162\",\"_breakpoint\":false,\"target\":\"urn:f5296eb9-c324-4895-b6e3-3899c5d46631\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"5167909d-5840-45d8-8604-7b8de6672853\",\"name\":\"CHOICE_CONNECTION\",\"properties\":{\"points\":\"411,128;411,30;\",\"expression\":\"message.properties[\'actions.http.requestURI\'] == \'\\/\'\",\"source\":\"urn:4f455139-d4d3-4043-a3cd-07f73b79169d\",\"_breakpoint\":false,\"target\":\"urn:f1d11de7-245b-45d8-a170-20c412ca7f5e\",\"type\":\"CHOICE_CONNECTION\"}},{\"id\":\"a8187df2-ee1b-4f90-99ec-5e61c587b2ef\",\"name\":\"FOR_EACH_CONNECTION\",\"properties\":{\"points\":\"601,221;601,265;\",\"source\":\"urn:55ef6b9a-af08-41c1-9d1a-809a1d26a3dd\",\"_breakpoint\":false,\"target\":\"urn:e1c905e7-797f-4e53-92b6-0f84ad0b86d6\",\"type\":\"FOR_EACH_CONNECTION\"}},{\"id\":\"6ccada96-3c12-4cbb-8b2e-b2ad2e339463\",\"name\":\"ALL_CONNECTION\",\"properties\":{\"points\":\"641,271;727,262;\",\"source\":\"urn:e1c905e7-797f-4e53-92b6-0f84ad0b86d6\",\"_breakpoint\":false,\"targetExpression\":\"expression:groovy:message.properties[\'authors\'] = result.payload\",\"target\":\"urn:14cde4bb-206e-4a4b-9634-59a9e46e4328\",\"type\":\"ALL_CONNECTION\"}},{\"id\":\"9cf3485c-68ee-48e4-bddb-7de787fcae47\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"849,141;849,89;\",\"source\":\"urn:f5296eb9-c324-4895-b6e3-3899c5d46631\",\"_breakpoint\":false,\"target\":\"urn:0d87f9b7-b1d7-4f3a-82a6-938f0b814fa1\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"36c1237f-90e4-496d-be23-25233769d062\",\"name\":\"ALL_CONNECTION\",\"properties\":{\"points\":\"641,281;727,293;\",\"source\":\"urn:e1c905e7-797f-4e53-92b6-0f84ad0b86d6\",\"_breakpoint\":false,\"targetExpression\":\"expression:groovy:message.properties[\'publicationInfo\'] = result.payload\",\"target\":\"urn:76798eee-2611-4716-98f7-c0d9b553fdb7\",\"type\":\"ALL_CONNECTION\"}},{\"id\":\"4962d86a-465e-4677-bd77-d2aeccdfaf5f\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"275,138;370,138;\",\"source\":\"urn:bed32c10-5c89-4abf-8209-bd494de3bb6c\",\"_breakpoint\":false,\"target\":\"urn:4f455139-d4d3-4043-a3cd-07f73b79169d\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"b65ca8ea-a5ef-46c3-9218-bd0e856b5996\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"601,285;601,326;\",\"source\":\"urn:e1c905e7-797f-4e53-92b6-0f84ad0b86d6\",\"_breakpoint\":false,\"target\":\"urn:07ef4214-cda6-449f-89e1-44e6bbac4c6d\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"7b2765fd-c2fd-429f-ae6a-9d4f96bd3abd\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"856,211;871,211;\",\"source\":\"urn:627b263c-142c-45f1-b621-def812c0a1fb\",\"_breakpoint\":false,\"target\":\"urn:5cba053b-17b9-4b5f-9844-3472f61d87f8\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"3eefa003-8ec7-41d8-b92b-b60530d3d554\",\"name\":\"CHOICE_CONNECTION\",\"properties\":{\"points\":\"451,128;607,89;\",\"expression\":\"(message.properties[\'actions.http.requestURI\'] =~ \'\\\\\\\\\\/profile\\\\\\\\\\/[A-z]+\\\\\\\\\\/?\').matches()\",\"source\":\"urn:4f455139-d4d3-4043-a3cd-07f73b79169d\",\"_breakpoint\":false,\"target\":\"urn:c1517121-57ec-432e-a798-00582777f894\",\"type\":\"CHOICE_CONNECTION\"}},{\"id\":\"7c937ff9-a874-49e8-96c7-e934d3cf7ea9\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"675,211;694,211;\",\"source\":\"urn:55ef6b9a-af08-41c1-9d1a-809a1d26a3dd\",\"_breakpoint\":false,\"target\":\"urn:627b263c-142c-45f1-b621-def812c0a1fb\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}}]}',5,NULL);

INSERT INTO `connector` (`connector_id`, `name`, `type`, `team_id`) VALUES (1,'DB','SQL_CONNECTOR',1);

INSERT INTO `connector_configurations` (`connector_configurations_id`, `connector_id`, `name`, `value`) VALUES (1,1,'username','root');
INSERT INTO `connector_configurations` (`connector_configurations_id`, `connector_id`, `name`, `value`) VALUES (2,1,'driver','com.mysql.jdbc.Driver');
INSERT INTO `connector_configurations` (`connector_configurations_id`, `connector_id`, `name`, `value`) VALUES (3,1,'password','');
INSERT INTO `connector_configurations` (`connector_configurations_id`, `connector_id`, `name`, `value`) VALUES (4,1,'url','jdbc:mysql://localhost:3306/lifia_site');
