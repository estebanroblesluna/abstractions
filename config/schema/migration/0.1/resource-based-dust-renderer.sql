USE `actions`;

INSERT INTO `element_definition` (`element_definition_id`, `name`, `display_name`, `icon`, `implementation`, `library_id`, `is_script`) VALUES (20,'RESOURCE_DUST_RENDERER','Resource based Dust renderer','Resources/dust.gif','com.modules.dust.ResourceBasedDustRendererProcessor',2,0);
INSERT INTO `processor_definition` (`element_definition_id`) VALUES (20);

INSERT INTO `element_property_definition` (`property_definition_id`, `element_definition_id`, `name`, `display_name`, `property_type`, `default_value`) VALUES (39,20,'name','Name','STRING','');
INSERT INTO `element_property_definition` (`property_definition_id`, `element_definition_id`, `name`, `display_name`, `property_type`, `default_value`) VALUES (40,20,'bodyTemplatePath','Body template path','STRING','');
INSERT INTO `element_property_definition` (`property_definition_id`, `element_definition_id`, `name`, `display_name`, `property_type`, `default_value`) VALUES (41,20,'resourcesList','Resource list paths','STRING','');
INSERT INTO `element_property_definition` (`property_definition_id`, `element_definition_id`, `name`, `display_name`, `property_type`, `default_value`) VALUES (42,20,'templateRenderingList','Template rendering list','EXPRESSION','');

INSERT INTO `flows` (`flow_id`, `name`, `json_representation`, `application_id`, `application_snapshot_id`) VALUES (23,'1c61104d-91c9-45b6-bf57-a302a4a9755a','{\"id\":\"1c61104d-91c9-45b6-bf57-a302a4a9755a\",\"version\":1,\"definitions\":[{\"id\":\"f247492d-78d1-41c9-a83c-aae4bea8acfd\",\"name\":\"GROOVY\",\"properties\":{\"__incoming_connections\":\"list(urn:2c488a92-becc-4cbc-b4be-686f25a6b5e7)\",\"name\":\"Publications info\",\"_breakpoint\":false,\"x\":\"358\",\"y\":\"405\",\"script\":\"message.payload = \'{\\\"publications\\\":[{\\\"authors\\\":\\\"Santiago Robles, Juan Lautaro Fern??ndez, Andres Fortier, Gustavo Rossi, Silvia E. Gordillo.\\\",\\\"title\\\":\\\"Improving the model view controller paradigm in the web.\\\",\\\"conference\\\":\\\"Int. J. Web Eng. Technol. 7(1): 22-44 (2012).\\\"},{\\\"authors\\\":\\\"Gustavo Rossi, San Murugesan, Nina Godbole.\\\",\\\"title\\\":\\\"IT in Emerging Markets.\\\",\\\"conference\\\":\\\"IT Professional 14(4): 2-3 (2012).\\\"},{\\\"authors\\\":\\\"Mario Matias Urbieta, Gustavo Rossi, Silvia E. Gordillo, Wieland Schwinger, Werner Retschitzegger, Mar??a Jos?? Escalona Cuaresma.\\\",\\\"title\\\":\\\"Identifying and Modelling Complex Workflow Requirements in Web Applications.\\\",\\\"conference\\\":\\\"ICWE Workshops 2012: 146-157.\\\"}]}\'\"}},{\"id\":\"e3c342b9-b600-412c-b748-7796a568f870\",\"name\":\"HTTP_FETCHER\",\"properties\":{\"__incoming_connections\":\"list(urn:e144e010-28f2-4646-abd5-56c31a4b5bbb)\",\"fetchMode\":\"GET\",\"urlExpression\":\"\'http:\\/\\/localhost:8833\\/publications\'\",\"name\":\"HTTP fetch publications\",\"_breakpoint\":false,\"x\":\"592\",\"y\":\"200\",\"streaming\":\"false\"}},{\"id\":\"3f409e26-32bb-4cd7-a3ac-db2aa6f56b44\",\"name\":\"GROOVY\",\"properties\":{\"__incoming_connections\":\"list(urn:0efc770f-ed1b-49b9-913b-08fa8829e375)\",\"name\":\"Profile info\",\"_breakpoint\":false,\"x\":\"490\",\"y\":\"407\",\"script\":\"message.payload = \'{\\\"firstName\\\":\\\"Gustavo\\\",\\\"lastName\\\":\\\"Rossi\\\",\\\"position\\\":\\\"Investigador\\\",\\\"address\\\":\\\"Lifia, calle 50 y 115, La Plata, Prov. Buenos Aires, Argentina\\\",\\\"phone\\\":\\\"(+54 221) 423 6585 ext 213\\\",\\\"fax\\\":\\\"(+54 221) 422 8252\\\"}\'\"}},{\"id\":\"4a46fa35-b525-4646-8e36-5bc874d73c9e\",\"name\":\"ALL\",\"properties\":{\"__incoming_connections\":\"list(urn:8f66e119-7ab3-47fe-a288-9f0ac0e0f8b7)\",\"__connections\":\"list(urn:9d8476be-d27a-41cf-9f81-6aa0226f651d,urn:673a8624-28d2-4998-8be2-72fd67ca7f66,urn:e144e010-28f2-4646-abd5-56c31a4b5bbb,urn:d1dbfc56-d063-44d2-adbe-a187c25471c9)\",\"__next_in_chain\":\"urn:673a8624-28d2-4998-8be2-72fd67ca7f66\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(urn:673a8624-28d2-4998-8be2-72fd67ca7f66)\",\"name\":\"Fetch gustavo info\",\"_breakpoint\":false,\"x\":\"439\",\"y\":\"173\",\"__connectionsALL_CONNECTION\":\"list(urn:9d8476be-d27a-41cf-9f81-6aa0226f651d,urn:e144e010-28f2-4646-abd5-56c31a4b5bbb,urn:d1dbfc56-d063-44d2-adbe-a187c25471c9)\"}},{\"id\":\"f0713257-6b3a-4433-84f6-934b0cbe94ae\",\"name\":\"LOG\",\"properties\":{\"__incoming_connections\":\"list(urn:35c99368-9ca7-48d3-8908-b783db8f5341)\",\"toLogExpression\":\"\'[INCOMING TRAFFIC] to: \' + message.properties[\'actions.http.requestURI\']\",\"name\":\"Log\",\"_breakpoint\":false,\"x\":\"293\",\"y\":\"332\",\"logName\":\"incomingTraffic\"}},{\"id\":\"5d10e91f-3002-4f5f-b305-3692c4f57040\",\"name\":\"RESOURCE_DUST_RENDERER\",\"properties\":{\"__incoming_connections\":\"list(urn:61b1b365-81b3-45a9-b54b-b69c750a1692,urn:d1dbfc56-d063-44d2-adbe-a187c25471c9)\",\"compiledTemplatePath\":\"templates\\/t.ctl\",\"name\":\"\",\"_breakpoint\":false,\"x\":\"559\",\"jsonData\":\"message.payload\",\"y\":\"239\",\"templateList\":\"templates\\/t1.tl;templates\\/t2.tl;templates\\/t.tl\"}},{\"id\":\"d85baf22-3b59-4519-ad06-24e220791570\",\"name\":\"RESOURCE_DUST_RENDERER\",\"properties\":{\"__incoming_connections\":\"list(urn:a60c89de-c8f0-4f57-98de-2d91285d5841)\",\"compiledTemplatePath\":\"templates\\/home.ctl\",\"name\":\"d2\",\"_breakpoint\":false,\"x\":\"652\",\"jsonData\":\"message.payload\",\"y\":\"299\",\"templateList\":\"home.tl\"}},{\"id\":\"ec9f8f9b-cd30-4cb1-8619-711873afe856\",\"name\":\"GROOVY\",\"properties\":{\"__incoming_connections\":\"list(urn:26662a2f-0327-40af-9f44-f9f87449db99)\",\"name\":\"Pagina matias\",\"_breakpoint\":false,\"x\":\"495\",\"y\":\"88\",\"script\":\"message.payload = \'Matias\'\"}},{\"id\":\"250c730b-0b5e-4236-a0a9-f262447809ce\",\"name\":\"FILE_READER\",\"properties\":{\"__incoming_connections\":\"list(urn:0c4f9da2-fd9c-4f2a-82b7-4170d9e43218)\",\"name\":\"File reader\",\"filePath\":\"message.properties[\'actions.http.requestURI\'].replaceAll(\'\\/people\\/\', \'\\/\')\",\"_breakpoint\":false,\"x\":\"358\",\"y\":\"206\",\"directory\":\"\'\\/Users\\/estebanroblesluna\\/Downloads\\/lifia\\/es\'\"}},{\"id\":\"f5642575-af3a-4166-b6e1-526037ab0a55\",\"name\":\"GROOVY\",\"properties\":{\"__incoming_connections\":\"list(urn:673a8624-28d2-4998-8be2-72fd67ca7f66)\",\"__connections\":\"list(,urn:a60c89de-c8f0-4f57-98de-2d91285d5841)\",\"__next_in_chain\":\"urn:a60c89de-c8f0-4f57-98de-2d91285d5841\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(,urn:a60c89de-c8f0-4f57-98de-2d91285d5841)\",\"name\":\"Merge json\",\"_breakpoint\":true,\"x\":\"495\",\"y\":\"282\",\"script\":\"message.payload = \\\"{json: \'\\\" + message.properties[\'profileJson\'].toString() + \\\"\', cdn: \'http:\\/\\/localhost:8080\\/service\\/fileStore\\/2\\/files\\/\'}\\\"\"}},{\"id\":\"927b3eea-82ff-4774-a89d-f536a8fda390\",\"name\":\"HTTP_FETCHER\",\"properties\":{\"__incoming_connections\":\"list(urn:9d8476be-d27a-41cf-9f81-6aa0226f651d)\",\"fetchMode\":\"GET\",\"urlExpression\":\"\'http:\\/\\/localhost:8833\\/profile\'\",\"name\":\"HTTP fetch profile\",\"_breakpoint\":false,\"x\":\"580\",\"y\":\"132\",\"streaming\":\"false\"}},{\"id\":\"9e24bbef-69ad-478e-9864-eb70b27a194f\",\"name\":\"HTTP_MESSAGE_SOURCE\",\"properties\":{\"__connections\":\"list(urn:aac61b2c-272b-45b1-9cc9-052d72de0f36)\",\"__next_in_chain\":\"urn:aac61b2c-272b-45b1-9cc9-052d72de0f36\",\"port\":\"8833\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(null,urn:aac61b2c-272b-45b1-9cc9-052d72de0f36)\",\"name\":\"Backend entry point\",\"_breakpoint\":false,\"x\":\"39\",\"y\":\"313\"}},{\"id\":\"502754a7-cd66-4dee-a12f-09db8cde0cfe\",\"name\":\"HTTP_MESSAGE_SOURCE\",\"properties\":{\"__connections\":\"list(urn:31625e48-da0f-40dd-9179-f99f479a8143)\",\"__next_in_chain\":\"urn:31625e48-da0f-40dd-9179-f99f479a8143\",\"port\":\"8822\",\"timeoutExpression\":\"return 0l;\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(urn:31625e48-da0f-40dd-9179-f99f479a8143)\",\"name\":\"Frontend entry point\",\"_breakpoint\":false,\"x\":\"138\",\"y\":\"97\"}},{\"id\":\"034eaeae-bb72-4bd0-80a8-bd8e98153782\",\"name\":\"CHOICE\",\"properties\":{\"__connectionsCHOICE_CONNECTION\":\"list(urn:619acdb2-fff6-4160-9a36-d16bb16fb986,urn:26662a2f-0327-40af-9f44-f9f87449db99,urn:8203c333-a472-4954-9d33-f0d39df86a80,urn:c917b54b-db35-4431-a8e5-0f89d71106ea,urn:8f66e119-7ab3-47fe-a288-9f0ac0e0f8b7,urn:0c4f9da2-fd9c-4f2a-82b7-4170d9e43218)\",\"__incoming_connections\":\"list(urn:31625e48-da0f-40dd-9179-f99f479a8143)\",\"__connections\":\"list(urn:0c4f9da2-fd9c-4f2a-82b7-4170d9e43218,urn:8f66e119-7ab3-47fe-a288-9f0ac0e0f8b7,urn:8203c333-a472-4954-9d33-f0d39df86a80,urn:26662a2f-0327-40af-9f44-f9f87449db99)\",\"name\":\"Path router\",\"_breakpoint\":false,\"x\":\"348\",\"y\":\"93\"}},{\"id\":\"57ed021a-ad36-433e-ad91-d17e5def0f61\",\"name\":\"FILE_READER\",\"properties\":{\"__incoming_connections\":\"list(urn:8203c333-a472-4954-9d33-f0d39df86a80)\",\"name\":\"Sitio viejo del lifia\",\"filePath\":\"message.properties[\'actions.http.requestURI\'].replaceAll(\'\\/lifia\\/\', \'\\/\')\",\"_breakpoint\":false,\"x\":\"449\",\"y\":\"21\",\"directory\":\"\'\\/Users\\/estebanroblesluna\\/Downloads\\/lifia\'\"}},{\"id\":\"1db71c62-d1e4-45a1-a498-502e7c717e62\",\"name\":\"WIRE_TAP\",\"properties\":{\"__incoming_connections\":\"list(urn:aac61b2c-272b-45b1-9cc9-052d72de0f36)\",\"__connections\":\"list(urn:35c99368-9ca7-48d3-8908-b783db8f5341,urn:504e1613-83a1-4cd8-8dcd-6b1d92803ca7)\",\"__next_in_chain\":\"urn:504e1613-83a1-4cd8-8dcd-6b1d92803ca7\",\"__connectionsNEXT_IN_CHAIN_CONNECTION\":\"list(urn:504e1613-83a1-4cd8-8dcd-6b1d92803ca7)\",\"__connectionsWIRE_TAP_CONNECTION\":\"list(urn:35c99368-9ca7-48d3-8908-b783db8f5341)\",\"name\":\"Wire tap\",\"_breakpoint\":false,\"x\":\"246\",\"y\":\"382\"}},{\"id\":\"48f1c351-438a-4709-b1f5-0dbcb90e1810\",\"name\":\"CHOICE\",\"properties\":{\"__connectionsCHOICE_CONNECTION\":\"list(urn:0efc770f-ed1b-49b9-913b-08fa8829e375,urn:2c488a92-becc-4cbc-b4be-686f25a6b5e7)\",\"__incoming_connections\":\"list(urn:504e1613-83a1-4cd8-8dcd-6b1d92803ca7)\",\"__connections\":\"list(urn:0efc770f-ed1b-49b9-913b-08fa8829e375,urn:2c488a92-becc-4cbc-b4be-686f25a6b5e7)\",\"name\":\"Path router\",\"_breakpoint\":false,\"x\":\"418\",\"y\":\"347\"}},{\"id\":\"aac61b2c-272b-45b1-9cc9-052d72de0f36\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"135,336;252,382;\",\"source\":\"urn:9e24bbef-69ad-478e-9864-eb70b27a194f\",\"_breakpoint\":false,\"target\":\"urn:1db71c62-d1e4-45a1-a498-502e7c717e62\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"0c4f9da2-fd9c-4f2a-82b7-4170d9e43218\",\"name\":\"CHOICE_CONNECTION\",\"properties\":{\"points\":\"392,116;400,206;\",\"expression\":\"message.properties[\'actions.http.requestURI\'].startsWith(\'\\/people\\/\')\",\"source\":\"urn:034eaeae-bb72-4bd0-80a8-bd8e98153782\",\"_breakpoint\":false,\"target\":\"urn:250c730b-0b5e-4236-a0a9-f262447809ce\"}},{\"id\":\"8f66e119-7ab3-47fe-a288-9f0ac0e0f8b7\",\"name\":\"CHOICE_CONNECTION\",\"properties\":{\"points\":\"407,116;486,173;\",\"expression\":\"message.properties[\'actions.http.requestURI\'] == \'\\/people\\/gustavo\'\",\"source\":\"urn:034eaeae-bb72-4bd0-80a8-bd8e98153782\",\"_breakpoint\":false,\"target\":\"urn:4a46fa35-b525-4646-8e36-5bc874d73c9e\"}},{\"id\":\"a60c89de-c8f0-4f57-98de-2d91285d5841\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"582,299;652,309;\",\"source\":\"urn:f5642575-af3a-4166-b6e1-526037ab0a55\",\"_breakpoint\":false,\"target\":\"urn:d85baf22-3b59-4519-ad06-24e220791570\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"8203c333-a472-4954-9d33-f0d39df86a80\",\"name\":\"CHOICE_CONNECTION\",\"properties\":{\"points\":\"410,93;491,44;\",\"expression\":\"message.properties[\'actions.http.requestURI\'].startsWith(\'\\/lifia\\/\')\",\"source\":\"urn:034eaeae-bb72-4bd0-80a8-bd8e98153782\",\"_breakpoint\":false,\"target\":\"urn:57ed021a-ad36-433e-ad91-d17e5def0f61\"}},{\"id\":\"9d8476be-d27a-41cf-9f81-6aa0226f651d\",\"name\":\"ALL_CONNECTION\",\"properties\":{\"points\":\"541,173;602,155;\",\"source\":\"urn:4a46fa35-b525-4646-8e36-5bc874d73c9e\",\"_breakpoint\":false,\"targetExpression\":\"message.properties[\'profileJson\'] = result.payload\",\"target\":\"urn:927b3eea-82ff-4774-a89d-f536a8fda390\"}},{\"id\":\"d1dbfc56-d063-44d2-adbe-a187c25471c9\",\"name\":\"ALL_CONNECTION\",\"properties\":{\"points\":\"514,196;561,239;\",\"source\":\"urn:4a46fa35-b525-4646-8e36-5bc874d73c9e\",\"_breakpoint\":false,\"target\":\"urn:5d10e91f-3002-4f5f-b305-3692c4f57040\",\"type\":\"ALL_CONNECTION\"}},{\"id\":\"35c99368-9ca7-48d3-8908-b783db8f5341\",\"name\":\"WIRE_TAP_CONNECTION\",\"properties\":{\"points\":\"290,382;308,355;\",\"source\":\"urn:1db71c62-d1e4-45a1-a498-502e7c717e62\",\"_breakpoint\":false,\"target\":\"urn:f0713257-6b3a-4433-84f6-934b0cbe94ae\",\"type\":\"WIRE_TAP_CONNECTION\"}},{\"id\":\"504e1613-83a1-4cd8-8dcd-6b1d92803ca7\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"317,387;418,367;\",\"source\":\"urn:1db71c62-d1e4-45a1-a498-502e7c717e62\",\"_breakpoint\":false,\"target\":\"urn:48f1c351-438a-4709-b1f5-0dbcb90e1810\",\"type\":\"NEXT_IN_CHAIN_CONNECTION\"}},{\"id\":\"0efc770f-ed1b-49b9-913b-08fa8829e375\",\"name\":\"CHOICE_CONNECTION\",\"properties\":{\"points\":\"475,370;518,407;\",\"expression\":\"message.properties[\'actions.http.requestURI\'] == \'\\/profile\'\",\"source\":\"urn:48f1c351-438a-4709-b1f5-0dbcb90e1810\",\"_breakpoint\":false,\"target\":\"urn:3f409e26-32bb-4cd7-a3ac-db2aa6f56b44\"}},{\"id\":\"673a8624-28d2-4998-8be2-72fd67ca7f66\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"505,196;535,282;\",\"source\":\"urn:4a46fa35-b525-4646-8e36-5bc874d73c9e\",\"_breakpoint\":false,\"target\":\"urn:f5642575-af3a-4166-b6e1-526037ab0a55\"}},{\"id\":\"31625e48-da0f-40dd-9179-f99f479a8143\",\"name\":\"NEXT_IN_CHAIN_CONNECTION\",\"properties\":{\"points\":\"273,107;348,105;\",\"source\":\"urn:502754a7-cd66-4dee-a12f-09db8cde0cfe\",\"_breakpoint\":false,\"target\":\"urn:034eaeae-bb72-4bd0-80a8-bd8e98153782\"}},{\"id\":\"e144e010-28f2-4646-abd5-56c31a4b5bbb\",\"name\":\"ALL_CONNECTION\",\"properties\":{\"points\":\"564,195;598,200;\",\"source\":\"urn:4a46fa35-b525-4646-8e36-5bc874d73c9e\",\"_breakpoint\":false,\"targetExpression\":\"message.properties[\'publicationsJson\'] = result.payload\",\"target\":\"urn:e3c342b9-b600-412c-b748-7796a568f870\"}},{\"id\":\"26662a2f-0327-40af-9f44-f9f87449db99\",\"name\":\"CHOICE_CONNECTION\",\"properties\":{\"points\":\"434,103;495,101;\",\"expression\":\"message.properties[\'actions.http.requestURI\'] == \'\\/people\\/murbieta\'\",\"source\":\"urn:034eaeae-bb72-4bd0-80a8-bd8e98153782\",\"_breakpoint\":false,\"target\":\"urn:ec9f8f9b-cd30-4cb1-8619-711873afe856\"}},{\"id\":\"2c488a92-becc-4cbc-b4be-686f25a6b5e7\",\"name\":\"CHOICE_CONNECTION\",\"properties\":{\"points\":\"452,370;425,405;\",\"expression\":\"message.properties[\'actions.http.requestURI\'] == \'\\/publications\'\",\"source\":\"urn:48f1c351-438a-4709-b1f5-0dbcb90e1810\",\"_breakpoint\":false,\"target\":\"urn:f247492d-78d1-41c9-a83c-aae4bea8acfd\"}}]}',2,NULL)
